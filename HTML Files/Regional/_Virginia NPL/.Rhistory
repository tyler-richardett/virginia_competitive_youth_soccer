teams <- schedule %>% select(HOME_TEAM, HOME_TEAMCODE, DIVISION)
teams <- teams %>% mutate(`Age Group` = substring(DIVISION, 1, 3), Gender = ifelse(grepl("B", HOME_TEAMCODE), "Boys", "Girls"))
teams <- teams %>% select(HOME_TEAM, `Age Group`, Gender) %>% distinct()
fields <- unique(schedule$FIELD)
schedule <- schedule %>% select(HOME_TEAM, FIELD)
View(schedule)
View(teams)
View(fields)
schedule <- read_xls("International_Football_Club.xls")
schedule <- schedule %>% filter(grepl("^IFC", HOME_TEAM))
teams <- schedule %>% select(HOME_TEAM, HOME_TEAMCODE, DIVISION)
teams <- teams %>% mutate(`Age Group` = substring(DIVISION, 1, 3), Gender = ifelse(grepl("B", HOME_TEAMCODE), "Boys", "Girls"))
teams <- teams %>% select(HOME_TEAM, `Age Group`, Gender) %>% distinct()
fields <- unique(schedule$FIELD)
schedule <- schedule %>% select(HOME_TEAM, FIELD)
View(schedule)
View(teams)
View(fields)
schedule <- read_xls("Leesburg_Football_Club.xls")
schedule <- schedule %>% filter(grepl("^LFC", HOME_TEAM))
teams <- schedule %>% select(HOME_TEAM, HOME_TEAMCODE, DIVISION)
teams <- teams %>% mutate(`Age Group` = substring(DIVISION, 1, 3), Gender = ifelse(grepl("B", HOME_TEAMCODE), "Boys", "Girls"))
teams <- teams %>% select(HOME_TEAM, `Age Group`, Gender) %>% distinct()
fields <- unique(schedule$FIELD)
schedule <- schedule %>% select(HOME_TEAM, FIELD)
View(schedule)
View(teams)
View(fields)
schedule <- read_xls("Liverpool_FCIA_Western_MD.xls")
schedule <- schedule %>% filter(grepl("^LPFC", HOME_TEAM))
teams <- schedule %>% select(HOME_TEAM, HOME_TEAMCODE, DIVISION)
teams <- teams %>% mutate(`Age Group` = substring(DIVISION, 1, 3), Gender = ifelse(grepl("B", HOME_TEAMCODE), "Boys", "Girls"))
teams <- teams %>% select(HOME_TEAM, `Age Group`, Gender) %>% distinct()
fields <- unique(schedule$FIELD)
schedule <- schedule %>% select(HOME_TEAM, FIELD)
View(schedule)
View(teams)
View(fields)
schedule <- read_xls("Loudoun_Soccer_Club.xls")
schedule <- schedule %>% filter(grepl("^LOUD", HOME_TEAM))
teams <- schedule %>% select(HOME_TEAM, HOME_TEAMCODE, DIVISION)
teams <- teams %>% mutate(`Age Group` = substring(DIVISION, 1, 3), Gender = ifelse(grepl("B", HOME_TEAMCODE), "Boys", "Girls"))
teams <- teams %>% select(HOME_TEAM, `Age Group`, Gender) %>% distinct()
fields <- unique(schedule$FIELD)
schedule <- schedule %>% select(HOME_TEAM, FIELD)
View(schedule)
View(teams)
View(fields)
schedule <- read_xls("Manassas_Soccer_Club.xls")
schedule <- schedule %>% filter(grepl("^MSC", HOME_TEAM))
teams <- schedule %>% select(HOME_TEAM, HOME_TEAMCODE, DIVISION)
teams <- teams %>% mutate(`Age Group` = substring(DIVISION, 1, 3), Gender = ifelse(grepl("B", HOME_TEAMCODE), "Boys", "Girls"))
teams <- teams %>% select(HOME_TEAM, `Age Group`, Gender) %>% distinct()
fields <- unique(schedule$FIELD)
schedule <- schedule %>% select(HOME_TEAM, FIELD)
View(schedule)
View(teams)
View(fields)
schedule <- read_xls("Orange_County_Recreation_Association.xls")
schedule <- schedule %>% filter(grepl("^OCRA", HOME_TEAM))
teams <- schedule %>% select(HOME_TEAM, HOME_TEAMCODE, DIVISION)
teams <- teams %>% mutate(`Age Group` = substring(DIVISION, 1, 3), Gender = ifelse(grepl("B", HOME_TEAMCODE), "Boys", "Girls"))
teams <- teams %>% select(HOME_TEAM, `Age Group`, Gender) %>% distinct()
fields <- unique(schedule$FIELD)
schedule <- schedule %>% select(HOME_TEAM, FIELD)
View(schedule)
View(teams)
View(fields)
schedule <- read_xls("Premier_AC.xls")
schedule <- schedule %>% filter(grepl("^PAC", HOME_TEAM))
teams <- schedule %>% select(HOME_TEAM, HOME_TEAMCODE, DIVISION)
teams <- teams %>% mutate(`Age Group` = substring(DIVISION, 1, 3), Gender = ifelse(grepl("B", HOME_TEAMCODE), "Boys", "Girls"))
teams <- teams %>% select(HOME_TEAM, `Age Group`, Gender) %>% distinct()
fields <- unique(schedule$FIELD)
schedule <- schedule %>% select(HOME_TEAM, FIELD)
View(schedule)
View(teams)
View(fields)
schedule <- read_xls("Prince_William_Soccer_Club.xls")
schedule <- schedule %>% filter(grepl("^PWSI", HOME_TEAM))
teams <- schedule %>% select(HOME_TEAM, HOME_TEAMCODE, DIVISION)
teams <- teams %>% mutate(`Age Group` = substring(DIVISION, 1, 3), Gender = ifelse(grepl("B", HOME_TEAMCODE), "Boys", "Girls"))
teams <- teams %>% select(HOME_TEAM, `Age Group`, Gender) %>% distinct()
fields <- unique(schedule$FIELD)
schedule <- schedule %>% select(HOME_TEAM, FIELD)
View(schedule)
View(teams)
View(fields)
schedule <- read_xls("Real_World_Futbol_Club.xls")
schedule <- schedule %>% filter(grepl("^RWFC", HOME_TEAM))
teams <- schedule %>% select(HOME_TEAM, HOME_TEAMCODE, DIVISION)
teams <- teams %>% mutate(`Age Group` = substring(DIVISION, 1, 3), Gender = ifelse(grepl("B", HOME_TEAMCODE), "Boys", "Girls"))
teams <- teams %>% select(HOME_TEAM, `Age Group`, Gender) %>% distinct()
fields <- unique(schedule$FIELD)
schedule <- schedule %>% select(HOME_TEAM, FIELD)
View(schedule)
View(teams)
View(fields)
schedule <- read_xls("Shenandoah_County_Soccer_League.xls")
schedule <- schedule %>% filter(grepl("^SCSL", HOME_TEAM))
teams <- schedule %>% select(HOME_TEAM, HOME_TEAMCODE, DIVISION)
teams <- teams %>% mutate(`Age Group` = substring(DIVISION, 1, 3), Gender = ifelse(grepl("B", HOME_TEAMCODE), "Boys", "Girls"))
teams <- teams %>% select(HOME_TEAM, `Age Group`, Gender) %>% distinct()
fields <- unique(schedule$FIELD)
schedule <- schedule %>% select(HOME_TEAM, FIELD)
View(schedule)
View(teams)
View(fields)
schedule <- read_xls("Southwestern_Youth_Association.xls")
schedule <- schedule %>% filter(grepl("^SYA", HOME_TEAM))
teams <- schedule %>% select(HOME_TEAM, HOME_TEAMCODE, DIVISION)
teams <- teams %>% mutate(`Age Group` = substring(DIVISION, 1, 3), Gender = ifelse(grepl("B", HOME_TEAMCODE), "Boys", "Girls"))
teams <- teams %>% select(HOME_TEAM, `Age Group`, Gender) %>% distinct()
fields <- unique(schedule$FIELD)
schedule <- schedule %>% select(HOME_TEAM, FIELD)
View(schedule)
View(teams)
View(fields)
schedule <- read_xls("Springfield_South_County_Youth_Club.xls")
schedule <- schedule %>% filter(grepl("^SYC", HOME_TEAM))
teams <- schedule %>% select(HOME_TEAM, HOME_TEAMCODE, DIVISION)
teams <- teams %>% mutate(`Age Group` = substring(DIVISION, 1, 3), Gender = ifelse(grepl("B", HOME_TEAMCODE), "Boys", "Girls"))
teams <- teams %>% select(HOME_TEAM, `Age Group`, Gender) %>% distinct()
fields <- unique(schedule$FIELD)
schedule <- schedule %>% select(HOME_TEAM, FIELD)
View(schedule)
View(teams)
View(fields)
schedule <- read_xls("Stafford_Soccer_Club.xls")
schedule <- schedule %>% filter(grepl("^STAF", HOME_TEAM))
teams <- schedule %>% select(HOME_TEAM, HOME_TEAMCODE, DIVISION)
teams <- teams %>% mutate(`Age Group` = substring(DIVISION, 1, 3), Gender = ifelse(grepl("B", HOME_TEAMCODE), "Boys", "Girls"))
teams <- teams %>% select(HOME_TEAM, `Age Group`, Gender) %>% distinct()
fields <- unique(schedule$FIELD)
schedule <- schedule %>% select(HOME_TEAM, FIELD)
View(schedule)
View(teams)
View(fields)
schedule <- read_xls("Team_America_Football_Club.xls")
schedule <- schedule %>% filter(grepl("^TAFC", HOME_TEAM))
teams <- schedule %>% select(HOME_TEAM, HOME_TEAMCODE, DIVISION)
teams <- teams %>% mutate(`Age Group` = substring(DIVISION, 1, 3), Gender = ifelse(grepl("B", HOME_TEAMCODE), "Boys", "Girls"))
teams <- teams %>% select(HOME_TEAM, `Age Group`, Gender) %>% distinct()
fields <- unique(schedule$FIELD)
schedule <- schedule %>% select(HOME_TEAM, FIELD)
View(schedule)
View(teams)
View(fields)
schedule <- read_xls("TriCounty_Soccer_Club.xls")
schedule <- schedule %>% filter(grepl("^TCSC", HOME_TEAM))
teams <- schedule %>% select(HOME_TEAM, HOME_TEAMCODE, DIVISION)
teams <- teams %>% mutate(`Age Group` = substring(DIVISION, 1, 3), Gender = ifelse(grepl("B", HOME_TEAMCODE), "Boys", "Girls"))
teams <- teams %>% select(HOME_TEAM, `Age Group`, Gender) %>% distinct()
fields <- unique(schedule$FIELD)
schedule <- schedule %>% select(HOME_TEAM, FIELD)
View(schedule)
View(teams)
View(fields)
schedule <- read_xls("Vienna_Youth_Soccer.xls")
schedule <- schedule %>% filter(grepl("^VYS", HOME_TEAM))
teams <- schedule %>% select(HOME_TEAM, HOME_TEAMCODE, DIVISION)
teams <- teams %>% mutate(`Age Group` = substring(DIVISION, 1, 3), Gender = ifelse(grepl("B", HOME_TEAMCODE), "Boys", "Girls"))
teams <- teams %>% select(HOME_TEAM, `Age Group`, Gender) %>% distinct()
fields <- unique(schedule$FIELD)
schedule <- schedule %>% select(HOME_TEAM, FIELD)
View(schedule)
View(teams)
View(fields)
schedule <- read_xls("Virginia_Independent_Soccer_Team_Association.xls")
schedule <- schedule %>% filter(grepl("^VIST", HOME_TEAM))
teams <- schedule %>% select(HOME_TEAM, HOME_TEAMCODE, DIVISION)
teams <- teams %>% mutate(`Age Group` = substring(DIVISION, 1, 3), Gender = ifelse(grepl("B", HOME_TEAMCODE), "Boys", "Girls"))
teams <- teams %>% select(HOME_TEAM, `Age Group`, Gender) %>% distinct()
fields <- unique(schedule$FIELD)
schedule <- schedule %>% select(HOME_TEAM, FIELD)
View(schedule)
View(teams)
View(fields)
schedule <- read_xls("Virginia_Independent_Soccer_Team_Assoc.xls")
schedule <- schedule %>% filter(grepl("^VIST", HOME_TEAM))
teams <- schedule %>% select(HOME_TEAM, HOME_TEAMCODE, DIVISION)
teams <- teams %>% mutate(`Age Group` = substring(DIVISION, 1, 3), Gender = ifelse(grepl("B", HOME_TEAMCODE), "Boys", "Girls"))
teams <- teams %>% select(HOME_TEAM, `Age Group`, Gender) %>% distinct()
fields <- unique(schedule$FIELD)
schedule <- schedule %>% select(HOME_TEAM, FIELD)
View(schedule)
View(teams)
View(fields)
schedule <- read_xls("Virginia_Soccer_Association.xls")
schedule <- schedule %>% filter(grepl("^VSA", HOME_TEAM))
teams <- schedule %>% select(HOME_TEAM, HOME_TEAMCODE, DIVISION)
teams <- teams %>% mutate(`Age Group` = substring(DIVISION, 1, 3), Gender = ifelse(grepl("B", HOME_TEAMCODE), "Boys", "Girls"))
teams <- teams %>% select(HOME_TEAM, `Age Group`, Gender) %>% distinct()
fields <- unique(schedule$FIELD)
schedule <- schedule %>% select(HOME_TEAM, FIELD)
View(schedule)
View(teams)
View(fields)
data(Titanic)
View(Titanic)
table(Titanic$freq)
as.data.frame(Titanic)
Titanic <- as.data.frame(Titanic)
table(Titanic$freq)
table(Titanic$freq, Titanic$Class)
table(Titanic$Freq, Titanic$Class)
library(dplyr)
?summarize
Titanic %>% group_by(Class) %>% summarize(sum(Freq))
Titanic %>% group_by(Sex) %>% summarize(sum(Freq))
Titanic %>% group_by(Age) %>% summarize(sum(Freq))
Titanic %>% group_by(Age, Class, Age, Survived) %>% summarize(sum(Freq))
Titanic %>% group_by(Age, Sex Class, Age, Survived) %>% summarize(sum(Freq))
Titanic %>% group_by(Age, Sexm Class, Age, Survived) %>% summarize(sum(Freq))
Titanic %>% group_by(Age, Sex, Class, Age, Survived) %>% summarize(sum(Freq))
View(Titanic %>% group_by(Age, Sex, Class, Age, Survived) %>% summarize(sum(Freq)))
View(Titanic %>% group_by(Age, Sex, Class, Age) %>% summarize(sum(Freq)))
titanic <- cbind(Titanic[1:16,], Titanic[17:32,])
View(titanic)
names(titanic)
titanic <- titanic[,c(1:3,5,10)]
titanic <- titanic %>% rename(Deceased = Freq, Alive = Freq.1)
titanic <- titanic %>% mutate(`Survival Rate` = Alive/(Alive+Deceased))
?t.test
schedule <- read_xls("Warrenton_Youth_Soccer_Club.xls")
schedule <- schedule %>% filter(grepl("^WYSC", HOME_TEAM))
teams <- schedule %>% select(HOME_TEAM, HOME_TEAMCODE, DIVISION)
teams <- teams %>% mutate(`Age Group` = substring(DIVISION, 1, 3), Gender = ifelse(grepl("B", HOME_TEAMCODE), "Boys", "Girls"))
teams <- teams %>% select(HOME_TEAM, `Age Group`, Gender) %>% distinct()
fields <- unique(schedule$FIELD)
schedule <- schedule %>% select(HOME_TEAM, FIELD)
View(schedule)
View(teams)
View(fields)
schedule <- read_xls("Winchester_Youth_Soccer_Club.xls")
schedule <- schedule %>% filter(grepl("^WIN", HOME_TEAM))
teams <- schedule %>% select(HOME_TEAM, HOME_TEAMCODE, DIVISION)
teams <- teams %>% mutate(`Age Group` = substring(DIVISION, 1, 3), Gender = ifelse(grepl("B", HOME_TEAMCODE), "Boys", "Girls"))
teams <- teams %>% select(HOME_TEAM, `Age Group`, Gender) %>% distinct()
fields <- unique(schedule$FIELD)
schedule <- schedule %>% select(HOME_TEAM, FIELD)
View(schedule)
View(teams)
View(fields)
schedule <- read_xls("Woodbridge_Soccer_Club.xls")
schedule <- schedule %>% filter(grepl("^WBSC", HOME_TEAM))
teams <- schedule %>% select(HOME_TEAM, HOME_TEAMCODE, DIVISION)
teams <- teams %>% mutate(`Age Group` = substring(DIVISION, 1, 3), Gender = ifelse(grepl("B", HOME_TEAMCODE), "Boys", "Girls"))
teams <- teams %>% select(HOME_TEAM, `Age Group`, Gender) %>% distinct()
fields <- unique(schedule$FIELD)
schedule <- schedule %>% select(HOME_TEAM, FIELD)
View(schedule)
View(teams)
View(fields)
schedule <- data.frame()
for (i in 1:1) {
tmp_url <- paste0("http://www.clubchampionsleague.com/schedules/page/", i, "/?season=11&club=0&group=0&gender=0&daterange=08%2F01%2F2017%20-%2012%2F31%2F2017&submit=Filter")
tmp_teams <- read_html(tmp_url) %>% html_nodes("td.column-home_club div.home-club-cell div p") %>% html_text(trim = TRUE)
tmp_age <- read_html(tmp_url) %>% html_nodes("td.column-group") %>% html_text(trim = TRUE)
tmp_field <- read_html(tmp_url) %>% html_nodes("td.column-location") %>% html_text(trim = TRUE)
tmp <- data.frame(Team = tmp_teams, `Age Group` = tmp_age, Field = tmp_field)
schedule <- rbind(schedule, tmp)
}
View(tmp_teams)
schedule <- data.frame()
for (i in 1:2) {
tmp_url <- paste0("http://www.clubchampionsleague.com/schedules/page/", i, "/?season=11&club=0&group=0&gender=0&daterange=08%2F01%2F2017%20-%2012%2F31%2F2017&submit=Filter")
tmp_teams <- read_html(tmp_url) %>% html_nodes("td.column-home_club div.home-club-cell div p.club-title") %>% html_text(trim = TRUE)
tmp_age <- read_html(tmp_url) %>% html_nodes("td.column-group") %>% html_text(trim = TRUE)
tmp_field <- read_html(tmp_url) %>% html_nodes("td.column-location") %>% html_text(trim = TRUE)
tmp <- data.frame(Team = tmp_teams, `Age Group` = tmp_age, Field = tmp_field)
schedule <- rbind(schedule, tmp)
}
View(schedule)
schedule <- data.frame()
for (i in 1:94) {
tmp_url <- paste0("http://www.clubchampionsleague.com/schedules/page/", i, "/?season=11&club=0&group=0&gender=0&daterange=08%2F01%2F2017%20-%2012%2F31%2F2017&submit=Filter")
tmp_teams <- read_html(tmp_url) %>% html_nodes("td.column-home_club div.home-club-cell div p.club-title") %>% html_text(trim = TRUE)
tmp_age <- read_html(tmp_url) %>% html_nodes("td.column-group") %>% html_text(trim = TRUE)
tmp_field <- read_html(tmp_url) %>% html_nodes("td.column-location") %>% html_text(trim = TRUE)
tmp <- data.frame(Team = tmp_teams, `Age Group` = tmp_age, Field = tmp_field)
schedule <- rbind(schedule, tmp)
}
View(schedule)
?write.csv
setwd("~/Documents/Research/National Youth Soccer/HTML Files/Virginia/CCL")
write.csv(schedule, "All_Games.csv", row.names = FALSE)
View(schedule)
?paste
schedule$Age.Group <- gsub("male$", " Male", schedule$Age.Group)
schedule$Age.Group <- gsub(" Male$", "male", schedule$Age.Group)
schedule$Age.Group <- gsub("[1-9]male$", " Male", schedule$Age.Group)
schedule <- read.csv("All_Games.csv", stringsAsFactors = FALSE)
schedule$Age.Group <- gsub("1male$", "1 Male", schedule$Age.Group)
schedule$Age.Group <- gsub("2male$", "2 Male", schedule$Age.Group)
schedule$Age.Group <- gsub("3male$", "3 Male", schedule$Age.Group)
schedule$Age.Group <- gsub("4male$", "4 Male", schedule$Age.Group)
schedule$Age.Group <- gsub("5male$", "5 Male", schedule$Age.Group)
schedule$Age.Group <- gsub("6male$", "6 Male", schedule$Age.Group)
schedule$Age.Group <- gsub("7male$", "7 Male", schedule$Age.Group)
schedule$Age.Group <- gsub("8male$", "8 Male", schedule$Age.Group)
schedule$Age.Group <- gsub("9male$", "9 Male", schedule$Age.Group)
schedule$Age.Group <- gsub("1female$", "1 Female", schedule$Age.Group)
schedule$Age.Group <- gsub("2female$", "2 Female", schedule$Age.Group)
schedule$Age.Group <- gsub("3female$", "3 Female", schedule$Age.Group)
schedule$Age.Group <- gsub("4female$", "4 Female", schedule$Age.Group)
schedule$Age.Group <- gsub("5female$", "5 Female", schedule$Age.Group)
schedule$Age.Group <- gsub("6female$", "6 Female", schedule$Age.Group)
schedule$Age.Group <- gsub("7female$", "7 Female", schedule$Age.Group)
schedule$Age.Group <- gsub("8female$", "8 Female", schedule$Age.Group)
schedule$Age.Group <- gsub("9female$", "9 Female", schedule$Age.Group)
schedule$Age.Group <- gsub("U9", "U09", schedule$Age.Group)
schedule$Field <- gsub("Field: ", " #", schedule$Field)
schedule$Field <- gsub("^TBA$", NA, schedule$Field)
schedule <- schedule %>% mutate(Team = paste(Team, Age.Group))
schedule <- schedule %>% mutate(Gender = ifelse(grepl("Female$", Age.Group), "Girls", "Boys"))
schedule <- schedule %>% mutate(Age.Group = substring(Age.Group, 6, 8))
write.csv(schedule, "All_Games.csv", row.names = FALSE)
teams <- schedule %>% select(Team, Age.Group, Gender) %>% distinct()
fields <- schedule %>% select(Field) %>% distinct()
schedule <- schedule %>% select(Team, Field)
View(teams)
View(schedule)
View(fields)
length(unique(teams$Team))
length(unique(schedule$Team))
length(unique(schedule$Field))
?order_by
?arrange
teams <- teams %>% arrange(Team)
View(teams)
fields <- fields %>% arrange(Field)
View(fields)
View(schedule)
>
schedule <- schedule %>% filter(!is.na(Field))
View(schedule)
write.csv(schedule, "~/Downloads/ccl_schedule.csv", row.names = FALSE)
rm(titanic)
rm(Titanic)
schedule <- data.frame()
for (i in 1:30) {
tmp_url <- paste0("http://www.clubchampionsleague.com/schedules/page/", i, "/?season=12&club=0&group=0&gender=0&daterange=08%2F01%2F2017%20-%2012%2F31%2F2017&submit=Filter")
tmp_teams <- read_html(tmp_url) %>% html_nodes("td.column-home_club div.home-club-cell div p.club-title") %>% html_text(trim = TRUE)
tmp_age <- read_html(tmp_url) %>% html_nodes("td.column-group") %>% html_text(trim = TRUE)
tmp_field <- read_html(tmp_url) %>% html_nodes("td.column-location") %>% html_text(trim = TRUE)
tmp <- data.frame(Team = tmp_teams, `Age Group` = tmp_age, Field = tmp_field)
schedule <- rbind(schedule, tmp)
}
schedule$Age.Group <- gsub("0male$", "0 Male", schedule$Age.Group)
schedule$Age.Group <- gsub("1male$", "1 Male", schedule$Age.Group)
schedule$Age.Group <- gsub("2male$", "2 Male", schedule$Age.Group)
schedule$Age.Group <- gsub("3male$", "3 Male", schedule$Age.Group)
schedule$Age.Group <- gsub("4male$", "4 Male", schedule$Age.Group)
schedule$Age.Group <- gsub("5male$", "5 Male", schedule$Age.Group)
schedule$Age.Group <- gsub("6male$", "6 Male", schedule$Age.Group)
schedule$Age.Group <- gsub("7male$", "7 Male", schedule$Age.Group)
schedule$Age.Group <- gsub("8male$", "8 Male", schedule$Age.Group)
schedule$Age.Group <- gsub("9male$", "9 Male", schedule$Age.Group)
schedule$Age.Group <- gsub("0female$", "0 Female", schedule$Age.Group)
schedule$Age.Group <- gsub("1female$", "1 Female", schedule$Age.Group)
schedule$Age.Group <- gsub("2female$", "2 Female", schedule$Age.Group)
schedule$Age.Group <- gsub("3female$", "3 Female", schedule$Age.Group)
schedule$Age.Group <- gsub("4female$", "4 Female", schedule$Age.Group)
schedule$Age.Group <- gsub("5female$", "5 Female", schedule$Age.Group)
schedule$Age.Group <- gsub("6female$", "6 Female", schedule$Age.Group)
schedule$Age.Group <- gsub("7female$", "7 Female", schedule$Age.Group)
schedule$Age.Group <- gsub("8female$", "8 Female", schedule$Age.Group)
schedule$Age.Group <- gsub("9female$", "9 Female", schedule$Age.Group)
schedule$Age.Group <- gsub("U9", "U09", schedule$Age.Group)
schedule$Field <- gsub("Field: ", " #", schedule$Field)
schedule$Field <- gsub("^TBA$", NA, schedule$Field)
schedule <- schedule %>% mutate(Team = paste(Team, Age.Group), Gender = ifelse(grepl("Female$", Age.Group), "Girls", "Boys"))
schedule <- schedule %>% mutate(Age.Group = substring(Age.Group, 6, 8))
View(teams)
View(schedule)
View(fields)
ccl <- read.csv("CCL.csv")
View(ccl)
write.csv(schedule, "CCL_II.csv", row.names = FALSE)
teams <- schedule %>% select(Team, Age.Group, Gender) %>% distinct()
fields <- schedule %>% select(Field) %>% distinct()
schedule <- schedule %>% select(Team, Field)
schedule <- schedule %>% filter(!is.na(Field))
rm(cll)
rm(ccl)
View(teams)
View(fields)
teams <- teams %>% arrange(Team)
fields <- fields %>% arrange(Field)
write.csv(schedule, "~/Downloads/ccl_ii_schedule.csv", row.names = FALSE)
setwd("~/Documents/Research/National Youth Soccer/HTML Files/Virginia/NCSL")
source('~/Documents/Research/National Youth Soccer/HTML Files/Virginia/ODSL/extract.R')
?rbind
environment()
ls()
A3 <- read_xls("A3_schedule.xls")
A3 <- A3 %>% filter(grepl("^A3", HOME_TEAM))
View(A3)
ls()
ABGC <- read_xls("ABGC_schedule.xls")
ABGC <- ABGC %>% filter(grepl("^ABGC", HOME_TEAM))
ALEX <- read_xls("ALEX_schedule.xls")
ALEX <- ALEX %>% filter(grepl("^ALEX", HOME_TEAM))
ARL <- read_xls("ARL_schedule.xls")
ARL <- ARL %>% filter(grepl("^ARL", HOME_TEAM))
ASA <- read_xls("ASA_schedule.xls")
ASA <- ASA %>% filter(grepl("^ASA", HOME_TEAM))
ASC <- read_xls("ASC_schedule.xls")
ASC <- ASC %>% filter(grepl("^ASC", HOME_TEAM))
AUSC <- read_xls("AUSC_schedule.xls")
AUSC <- AUSC %>% filter(grepl("^AUSC", HOME_TEAM))
BAC <- read_xls("BAC_schedule.xls")
BAC <- BAC %>% filter(grepl("^BAC", HOME_TEAM))
BETH <- read_xls("BETH_schedule.xls")
BETH <- BETH %>% filter(grepl("^BETH", HOME_TEAM))
BRYC <- read_xls("BRYC_schedule.xls")
BRYC <- BRYC %>% filter(grepl("^BRYC", HOME_TEAM))
list.files()
filenames <- list.files()
filenames <- filenames[-grep("extract.R", filenames)]
filenames <- list.files()
filenames <- filenames[-grep("extract.R", filenames)]
length(filenames)
acronyms <- gsub("_schedule.xls", "", filenames)
acrnoyms
acronyms
filenames <- list.files()
filenames <- filenames[-grep("extract.R", filenames)]
acronyms <- gsub("_schedule.xls", "", filenames)
schedule <- data.frame()
for (i in 1:length(filenames)) {
tmp <- read_xls(filenames[i])
tmp <- tmp %>% filter(grepl(acronyms[i], HOME_TEAM))
schedule <- rbind(schedule, tmp)
}
teams <- schedule %>% select(HOME_TEAM, HOME_TEAMCODE, DIVISION)
teams <- teams %>% mutate(`Age Group` = substring(DIVISION, 2, 4), Gender = ifelse(grepl("B", HOME_TEAMCODE), "Boys", "Girls"))
teams <- teams %>% select(HOME_TEAM, `Age Group`, Gender) %>% distinct()
fields <- schedule %>% select(FIELD) %>% distinct()
schedule <- schedule %>% select(HOME_TEAM, FIELD)
View(schedule)
View(teams)
View(fields)
View(teams)
teams <- teams %>% arrange(HOME_TEAM)
fields <- fields %>% arrange(FIELD)
View(teams)
View(fields)
l
fields <- fields %>% filter(!is.na(FIELD))
schedule <- schedule %>% filter(!is.na(FIELD))
write.csv(fields, "_NCSL_Fields.csv", row.names = FALSE)
write.csv(teams, "_NCSL_Teams.csv", row.names = FALSE)
write.csv(schedule, "_NCSL_Schedule.csv", row.names = FALSE)
View(read_html("http://elements.demosphere.com/80738/teams/club/List.html?rand6=874161") %>% html_nodes(table#cb-list-tbl-1 td) %>% html_text(trim = TRUE))
View(read_html("http://elements.demosphere.com/80738/teams/club/List.html?rand6=874161") %>% html_nodes("table#cb-list-tbl-1 td") %>% html_text(trim = TRUE))
View(read_html("http://elements.demosphere.com/80738/teams/club/List.html?rand6=874161") %>% html_nodes("table#cb-list-tbl-1 td a") %>% html_text(trim = TRUE))
clubs <- read_html("http://elements.demosphere.com/80738/teams/club/List.html?rand6=874161") %>% html_nodes("table#cb-list-tbl-1 td a") %>% html_text(trim = TRUE)
View(clubs)
clubs <- data.frame(clubs)
View(clubs)
setwd("~/Documents/Research/National Youth Soccer/HTML Files/Virginia/NPL")
filenames <- list.files()
filenames <- filenames[-grep("extract.R", filenames)]
filenames <- list.files()
filenames <- filenames[-grep("extract.R", filenames)]
filenames
substring(filenames[1], 1, 1)
?rep
rep(substring(filenames[1], 1, 1), 10)
filenames <- list.files()
filenames <- filenames[-grep("extract.R", filenames)]
schedule <- data.frame()
for(i in 1:length(filenames)) {
Team <- read_html(filenames[i]) %>% html_nodes("td.homeTeam a") %>% html_text(trim = TRUE)
Field <- read_html(filenames[i]) %>% html_nodes("td.location a") %>% html_text(trim = TRUE)
Gender <- rep(ifelse(substring(filenames[i], 1, 1) == "B", "Boys", "Girls"), length(tmp_team))
Age.Group <- rep(substring(filenames[i], 3, 5), length(tmp_team))
tmp <- data.frame(Team, Age.Group, Gender, Field)
schedule <- rbind(schedule, tmp)
}
for(i in 1:length(filenames)) {
Team <- read_html(filenames[i]) %>% html_nodes("td.homeTeam a") %>% html_text(trim = TRUE)
Field <- read_html(filenames[i]) %>% html_nodes("td.location a") %>% html_text(trim = TRUE)
Gender <- rep(ifelse(substring(filenames[i], 1, 1) == "B", "Boys", "Girls"), length(Team))
Age.Group <- rep(substring(filenames[i], 3, 5), length(Team))
tmp <- data.frame(Team, Age.Group, Gender, Field)
schedule <- rbind(schedule, tmp)
}
schedule <- data.frame()
for(i in 1:length(filenames)) {
Team <- read_html(filenames[i]) %>% html_nodes("td.homeTeam") %>% html_text(trim = TRUE)
Field <- read_html(filenames[i]) %>% html_nodes("td.location") %>% html_text(trim = TRUE)
Gender <- rep(ifelse(substring(filenames[i], 1, 1) == "B", "Boys", "Girls"), length(Team))
Age.Group <- rep(substring(filenames[i], 3, 5), length(Team))
tmp <- data.frame(Team, Age.Group, Gender, Field)
schedule <- rbind(schedule, tmp)
}
View(schedule)
View(schedule)
write.csv(schedule, "NPL_Full.csv", row.names = FALSE)
teams <- schedule %>% select(Team:Gender) %>% arrange(Team) %>% distinct()
fields <- schedule %>% filter(Field != "Unassigned") %>% select(Field) %>% arrange(Field) %>% distinct()
schedule <- schedule %>% filter(Field != "Unassigned") %>% select(Team, Field)
View(fields)
View(teams)
View(schedule)
write.csv(schedule, "NPL_Schedule.csv", row.names = FALSE)
write.csv(teams, "NPL_Teams.csv", row.names = FALSE)
write.csv(fields, "NPL_Fields.csv", row.names = FALSE)
View(fields)
